# gisenterprisereporter_scheduler
This script is in response to https://github.com/dannykrouk/gisenterprisereporter, for GISAdmins. BLUF: The script is made to run CLI for GIS Enterprise Reporter Tool, place the report in the folder of choosing, and send a email when done. 

1. generatekey.py​
This script is responsible for generating an encryption key that can later be used to encrypt and decrypt sensitive information such as passwords.

Key Functions:
generate_key(): This function generates a new encryption key using the cryptography.fernet library and saves it to a file named secret.key. This key will be used for encryption and decryption in other scripts.
Purpose: This script is typically run once to create the key file, which is stored securely and used in other processes requiring encryption.

2. encryptkey.py​
This script is designed to encrypt a plaintext password using the encryption key generated by generatekey.py.

Key Functions:
load_key(): Loads the encryption key stored in the secret.key file.
encrypt_password(): Encrypts a given plaintext password using the key loaded by load_key().
overwrite_password_in_script(): Searches for the password in a script file and replaces it with an encrypted or scrambled version.
Process:

First, the script encrypts the password my_password.
Then, it scrambles the plaintext password with a random string of the same length.
Finally, it searches for the password in the current script and replaces it with the scrambled version, ensuring no plaintext passwords remain in the code.
Purpose: This script helps protect sensitive information by encrypting and scrambling plaintext passwords in scripts, thus improving security by preventing exposed credentials.

3. gis_enterprise_reporter_v0.1.py
This script manages the execution of the "GIS Enterprise Reporter" tool, which generates reports about an ArcGIS Enterprise system, including detailed configuration information, status, and usage.

Key Functions:
Password Management:
decrypt_password(): Decrypts the password stored in the configuration file (er.config) using the key generated in generatekey.py.
decrypt_config_password(): Loads and decrypts the password stored in the configuration file, ensuring the password is secure and only decrypted just before use.
Tool Execution:
run_er_tool(): Decrypts the password, temporarily updates the configuration file with the decrypted password, runs the GIS Enterprise Reporter tool (er.exe), and then cleans up temporary files.
File Management:
move_output_files(): Moves the generated report files to a target directory, automatically creating folders based on the current year, month, and day.
Email Notification:
send_email(): Sends an email to notify relevant recipients that the report has been generated successfully.
Purpose: This script is designed to automate the process of running the GIS Enterprise Reporter tool, securely handling credentials, generating reports, moving the output files to the correct locations, and sending email notifications to designated recipients. The entire process ensures that sensitive information is encrypted and protected, while the reporting process is automated and efficient.

Overall Description:
Your set of scripts focuses on securely managing sensitive credentials, running the GIS Enterprise Reporter tool, and organizing and distributing the resulting reports. The workflow includes generating an encryption key, encrypting passwords, running the tool with encrypted credentials, and sending notifications upon completion. These scripts enhance security by ensuring that sensitive data like passwords are never exposed in plaintext, while also automating the report generation and distribution process.
